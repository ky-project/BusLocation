(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36d8ef89"],{"6d98":function(t,e,a){},8470:function(t,e,a){"use strict";var r=a("6d98"),i=a.n(r);i.a},d19d:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"user_dialog"}},[a("el-dialog",{attrs:{title:t.formOption.title,visible:t.formOption.visible,width:"30%"},on:{"update:visible":function(e){return t.$set(t.formOption,"visible",e)}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,size:"mini"}},[a("el-form-item",{attrs:{label:"所在部门","label-width":"80px",prop:"department.id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择部门"},model:{value:t.formData.department.id,callback:function(e){t.$set(t.formData.department,"id",e)},expression:"formData.department.id"}},t._l(t.departments,(function(t){return a("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}})})),1)],1),a("el-form-item",{attrs:{label:"职工编号","label-width":"80px",prop:"workId"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.workId,callback:function(e){t.$set(t.formData,"workId",e)},expression:"formData.workId"}})],1),a("el-form-item",{attrs:{label:"真实姓名","label-width":"80px",prop:"realName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.realName,callback:function(e){t.$set(t.formData,"realName",e)},expression:"formData.realName"}})],1),a("el-form-item",{attrs:{label:"密码","label-width":"80px",prop:"password"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),a("el-form-item",{attrs:{label:"身份证","label-width":"80px",prop:"idCard"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.idCard,callback:function(e){t.$set(t.formData,"idCard",e)},expression:"formData.idCard"}})],1),a("el-form-item",{attrs:{label:"联系方式","label-width":"80px",prop:"phone"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}})],1),a("el-form-item",{attrs:{label:"邮箱","label-width":"80px",prop:"email"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.email,callback:function(e){t.$set(t.formData,"email",e)},expression:"formData.email"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.formOption.visible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:t.enable,size:"mini"},on:{click:function(e){return t.submit("formData")}}},[t._v(t._s("add"===t.formOption.type?"添加":"修改"))])],1)],1)],1)},i=[],o=(a("608b"),{props:{dialogOption:Object,dialogData:Object,departments:Array},watch:{dialogOption:function(t){this.formOption=JSON.parse(JSON.stringify(t))},dialogData:function(t){this.formData=JSON.parse(JSON.stringify(t))},"formOption.visible":function(t){t||this.$refs.formData.resetFields()}},computed:{enable:function(){var t=!1;for(var e in this.formData)if("department"===e){if(!this.formData.department.id){t=!0;break}}else if(!this.formData[e]){t=!0;break}return t}},data:function(){var t=this,e=/^1(3|4|5|6|7|8|9)\d{9}$/,a=function(t,a,r){""===a.trim()?r(new Error("请输入电话号码")):e.test(a)?r():r(new Error("电话号码格式错误"))},r=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/,i=function(t,e,a){""===e.trim()?a(new Error("请输入身份证号")):r.test(e)?a():a(new Error("身份证号格式错误"))},o=/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/,s=function(t,e,a){""===e.trim()?a(new Error("请输入邮箱")):o.test(e)?a():a(new Error("邮箱格式错误"))},n=function(e,a,r){""===a.trim()?r(new Error("请输入密码")):a.trim().length>20||a.trim().length<5?r(new Error("长度为5-20数字字符串")):"*****"===a.trim()&&"add"===t.formOption.type?r(new Error('密码不能为"*****"')):r()};return{formOption:{title:"添加",type:"add",visible:!1},formData:{department:{id:""},workId:"",realName:"",password:"",idCard:"",phone:"",emial:""},rules:{"department.id":[{required:!0,message:"请选择部门",trigger:["blur","change"]}],workId:[{required:!0,message:"请输入工号",trigger:"blur"}],realName:[{required:!0,message:"请输入姓名",trigger:"blur"}],password:[{required:!0,validator:n,trigger:"blur"}],idCard:[{required:!0,validator:i,trigger:"blur"}],phone:[{required:!0,validator:a,trigger:"blur"}],email:[{required:!0,validator:s,trigger:"blur"}]}}},methods:{submit:function(t){var e=this;this.$refs[t].validate((function(t){if(t)switch(e.formOption.type){case"add":e.addUser();break;case"edit":e.editUser();break}}))},getDeptName:function(){var t=this,e="";return this.departments.find((function(a){a.deptId===t.formData.department.id&&(e=a.deptName)})),e},addUser:function(){var t=this;this.$axios.post("/busposition/m/user/add",this.formData).then((function(e){t.formOption.visible=!1,t.$message({type:"success",message:"添加成功"}),t.$emit("add",e.data.data)}))},editUser:function(){var t=this,e=JSON.parse(JSON.stringify(this.formData));"*****"===e.password&&(e.password=""),this.$axios.post("/busposition/m/user/update",e).then((function(e){t.formOption.visible=!1,t.$message({type:"success",message:"修改成功"}),t.$emit("edit",e.data.data)}))}}}),s=o,n=(a("8470"),a("6691")),l=Object(n["a"])(s,r,i,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-36d8ef89.d2bc8180.js.map