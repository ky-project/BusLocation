(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fbb8e71"],{"2bb8":function(e,r,s){"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,r,s,i){return r=r||"&",s=s||"=",null===e&&(e=void 0),"object"===typeof e?a(n(e),(function(n){var i=encodeURIComponent(t(n))+s;return o(e[n])?a(e[n],(function(e){return i+encodeURIComponent(t(e))})).join(r):i+encodeURIComponent(t(e[n]))})).join(r):i?encodeURIComponent(t(i))+s+encodeURIComponent(t(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,r){if(e.map)return e.map(r);for(var s=[],t=0;t<e.length;t++)s.push(r(e[t],t));return s}var n=Object.keys||function(e){var r=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.push(s);return r}},"560f":function(e,r,s){},"5ee4":function(e,r,s){"use strict";r.decode=r.parse=s("a2d3"),r.encode=r.stringify=s("2bb8")},6104:function(e,r,s){"use strict";var t=s("560f"),o=s.n(t);o.a},"90ab":function(e,r,s){"use strict";s.r(r);var t=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"personal"},[s("div",{staticClass:"personal-container"},[s("div",{staticClass:"base"},[s("el-form",{ref:"baseForm",staticClass:"base-form",attrs:{model:e.baseForm,rules:e.baseRules,"hide-required-asterisk":!0,"label-width":"90px","label-position":"left"}},[s("div",{staticClass:"base-title"},[s("i",{staticClass:"el-icon-s-custom"}),s("span",[e._v("基本信息")])]),s("el-form-item",{attrs:{label:"部门名:"}},[s("el-input",{attrs:{disabled:"",autocomplete:"off"},model:{value:e.baseForm.departmentName,callback:function(r){e.$set(e.baseForm,"departmentName",r)},expression:"baseForm.departmentName"}})],1),s("el-form-item",{attrs:{label:"职工编号:"}},[s("el-input",{attrs:{disabled:"",autocomplete:"off"},model:{value:e.baseForm.workId,callback:function(r){e.$set(e.baseForm,"workId",r)},expression:"baseForm.workId"}})],1),s("el-form-item",{attrs:{label:"真实姓名:",prop:"realName"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.baseForm.realName,callback:function(r){e.$set(e.baseForm,"realName",r)},expression:"baseForm.realName"}})],1),s("el-form-item",{attrs:{label:"电话号码:",prop:"phone"}},[s("el-input",{model:{value:e.baseForm.phone,callback:function(r){e.$set(e.baseForm,"phone",r)},expression:"baseForm.phone"}})],1),s("el-form-item",{attrs:{label:"身份证:",prop:"idCard"}},[s("el-input",{model:{value:e.baseForm.idCard,callback:function(r){e.$set(e.baseForm,"idCard",r)},expression:"baseForm.idCard"}})],1),s("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[s("el-input",{model:{value:e.baseForm.email,callback:function(r){e.$set(e.baseForm,"email",r)},expression:"baseForm.email"}})],1),s("el-form-item",[s("el-button",{attrs:{disabled:e.baseEnable,type:"primary"},on:{click:function(r){return e.saveForm("baseForm")}}},[e._v("保存")])],1)],1)],1),s("div",{staticClass:"modify-psw"},[s("el-form",{ref:"pswForm",staticClass:"psw-form",attrs:{model:e.pswForm,rules:e.pswRules,"hide-required-asterisk":!0,"label-width":"90px","label-position":"left"}},[s("div",{staticClass:"base-title"},[s("i",{staticClass:"el-icon-lock"}),s("span",[e._v("修改密码")])]),s("el-form-item",{attrs:{label:"密码:",prop:"password"}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.pswForm.password,callback:function(r){e.$set(e.pswForm,"password",r)},expression:"pswForm.password"}})],1),s("el-form-item",{attrs:{label:"新密码:",prop:"newPsw"}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.pswForm.newPsw,callback:function(r){e.$set(e.pswForm,"newPsw",r)},expression:"pswForm.newPsw"}})],1),s("el-form-item",{attrs:{label:"确认密码:",prop:"confirmPsw"}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.pswForm.confirmPsw,callback:function(r){e.$set(e.pswForm,"confirmPsw",r)},expression:"pswForm.confirmPsw"}})],1),s("el-form-item",[s("el-button",{attrs:{disabled:e.pswEnable,type:"primary"},on:{click:function(r){return e.saveForm("pswForm")}}},[e._v("保存")])],1)],1)],1)])])},o=[],a=(s("5ee4"),{name:"personal",data:function(){var e=this,r=function(r,s,t){""===s.trim()?t(new Error("请再次输入密码")):s!==e.pswForm.newPsw?t(new Error("两次输入密码不一致!")):t()},s=/^1(3|4|5|6|7|8|9)\d{9}$/,t=function(e,r,t){""===r.trim()?t(new Error("请输入电话号码")):s.test(r)?t():t(new Error("电话号码格式错误"))},o=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/,a=function(e,r,s){""===r.trim()?s(new Error("请输入身份证号")):o.test(r)?s():s(new Error("身份证号格式错误"))},n=/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/,i=function(e,r,s){""===r.trim()?s(new Error("请输入邮箱")):n.test(r)?s():s(new Error("邮箱格式错误"))};return{pswForm:{password:"",newPsw:"",confirmPsw:""},baseForm:{departmentName:"",realName:"",phone:"",idCard:"",id:1,workId:"",email:""},pswRules:{password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:5,max:20,message:"长度为5-20个字符数字",trigger:"blur"}],newPsw:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:5,max:20,message:"长度为5-20个字符数字",trigger:"blur"}],confirmPsw:[{validator:r,trigger:"blur"}]},baseRules:{realName:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{validator:t,trigger:"blur"}],idCard:[{validator:a,trigger:"blur"}],email:[{validator:i,trigger:"blur"}]}}},computed:{baseEnable:function(){return!(this.baseForm.realName&&this.baseForm.phone&&this.baseForm.idCard&&this.baseForm.email)},pswEnable:function(){return!(this.pswForm.password&&this.pswForm.newPsw&&this.pswForm.confirmPsw)}},created:function(){this.getBaseMes()},methods:{getBaseMes:function(){var e=this;this.$axios.get("/busposition/user/self/info").then((function(r){e.baseForm=r.data.data[0]}))},saveForm:function(e){var r=this;this.$refs[e].validate((function(s){if(s)switch(e){case"baseForm":r.saveUser();break;case"pswForm":r.savePsw();break}}))},saveUser:function(){var e=this,r={realName:this.baseForm.realName,phone:this.baseForm.phone,idCard:this.baseForm.idCard,email:this.baseForm.email,id:this.userId};this.$axios.post("/busposition/m/self/update/info",r).then((function(r){console.log(r),e.$message({type:"success",message:"信息修改成功"})}))},savePsw:function(){var e=this,r={oldPassword:this.pswForm.password,newPassword:this.pswForm.newPsw};this.$axios.post("/busposition/m/self/modify/pwd",r).then((function(r){console.log(r),e.$message({type:"success",message:"密码修改成功"})})).catch((function(r){e.pswForm={password:"",newPsw:"",confirmPsw:""}}))}}}),n=a,i=(s("6104"),s("6691")),l=Object(i["a"])(n,t,o,!1,null,null,null);r["default"]=l.exports},a2d3:function(e,r,s){"use strict";function t(e,r){return Object.prototype.hasOwnProperty.call(e,r)}e.exports=function(e,r,s,a){r=r||"&",s=s||"=";var n={};if("string"!==typeof e||0===e.length)return n;var i=/\+/g;e=e.split(r);var l=1e3;a&&"number"===typeof a.maxKeys&&(l=a.maxKeys);var m=e.length;l>0&&m>l&&(m=l);for(var p=0;p<m;++p){var c,u,d,f,b=e[p].replace(i,"%20"),w=b.indexOf(s);w>=0?(c=b.substr(0,w),u=b.substr(w+1)):(c=b,u=""),d=decodeURIComponent(c),f=decodeURIComponent(u),t(n,d)?o(n[d])?n[d].push(f):n[d]=[n[d],f]:n[d]=f}return n};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}}]);
//# sourceMappingURL=chunk-7fbb8e71.cc9d1c0a.js.map