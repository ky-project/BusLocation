(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b919e7a"],{"104c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"user_manager"}},[a("el-row",{staticClass:"console"},[a("el-col",{attrs:{span:20}},[a("el-form",{staticClass:"console-form",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.consoleForm.realName,callback:function(e){t.$set(t.consoleForm,"realName",e)},expression:"consoleForm.realName"}})],1),a("el-form-item",{attrs:{label:"工号"}},[a("el-input",{attrs:{placeholder:"请输入工号"},model:{value:t.consoleForm.workId,callback:function(e){t.$set(t.consoleForm,"workId",e)},expression:"consoleForm.workId"}})],1),a("el-form-item",{attrs:{label:"部门"}},[a("el-select",{attrs:{placeholder:"请选择部门"},model:{value:t.consoleForm.departmentId,callback:function(e){t.$set(t.consoleForm,"departmentId",e)},expression:"consoleForm.departmentId"}},t._l(t.searchDepartments,(function(t){return a("el-option",{key:t.deptId,attrs:{label:t.deptName,value:t.deptId}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.searchHandler}},[t._v("查询")])],1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:t.addHandler}},[t._v("添加")])],1)],1),a("el-row",{staticClass:"table-wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.pageData,border:"",stripe:"",size:"small","empty-text":"——暂无数据——","header-cell-style":t.headerCellStyle,"cell-style":t.cellStyle}},[a("el-table-column",{attrs:{prop:"departmentName",label:"部门","min-width":"80"}}),a("el-table-column",{attrs:{prop:"realName",label:"真实姓名","min-width":"80"}}),a("el-table-column",{attrs:{prop:"phone",label:"电话号码","min-width":"120"}}),a("el-table-column",{attrs:{prop:"idCard",label:"身份证","min-width":"150"}}),a("el-table-column",{attrs:{prop:"workId",label:"职工编号","min-width":"100"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱","min-width":"150"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"editBtn",attrs:{type:"text",size:"small"},on:{click:function(a){return t.editHandler(e.row)}}},[a("i",{staticClass:"el-icon-edit"})]),a("el-button",{staticClass:"delBtn",attrs:{type:"text",size:"small"},on:{click:function(a){return t.deleteHandler(e.row)}}},[a("i",{staticClass:"el-icon-delete"})])]}}])})],1)],1),a("el-row",{staticClass:"pagination-wrap"},[a("el-pagination",{attrs:{"current-page":t.pageOption.currentPage,"page-sizes":t.pageOption.pageSizes,"page-size":t.pageOption.pageSize,layout:t.pageOption.layout,total:t.pageOption.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("UserDialog",{attrs:{dialogOption:t.dialogOption,dialogData:t.dialogData,departments:t.departments},on:{add:t.addUser,edit:t.editUser}})],1)},l=[],i=(a("608b"),{data:function(){return{headerCellStyle:{"background-color":"#FAFAFA","font-size":"14px","line-height":"32px","text-align":"center"},cellStyle:{"text-align":"center"},totalData:[],pageOption:{currentPage:1,pageSizes:[5,10,20,50],pageSize:5,layout:"total, sizes, prev, pager, next, jumper",total:0},dialogOption:{visible:!1,title:"",type:""},dialogData:{department:{id:""},workId:"",realName:"",password:"",idCard:"",phone:"",email:""},searchDepartments:[],departments:[],consoleForm:{realName:"",departmentId:"",workId:""}}},components:{UserDialog:function(){return a.e("chunk-36d8ef89").then(a.bind(null,"d19d"))}},created:function(){this.getAllData(),this.getDepartment()},computed:{pageData:function(){var t=this,e=(this.pageOption.currentPage-1)*this.pageOption.pageSize;return this.totalData.filter((function(a,n){return n>=e&&n<e+t.pageOption.pageSize}))}},watch:{totalData:function(t){this.pageOption.total=t.length}},methods:{getAllData:function(){var t=this;this.$axios.get("/busposition/m/user/list").then((function(e){console.log(e.data.data),t.totalData=e.data.data}))},getDepartment:function(){var t=this;this.$axios.get("/busposition/m/department/base/info").then((function(e){t.departments=e.data.data,t.searchDepartments=JSON.parse(JSON.stringify(e.data.data)),t.searchDepartments.unshift({deptId:null,deptName:"全部"})}))},handleSizeChange:function(t){this.pageOption.pageSize=t},handleCurrentChange:function(t){this.pageOption.currentPage=t},searchHandler:function(){var t=this;""===this.consoleForm.departmentId&&(this.consoleForm.departmentId=null),this.$axios.post("busposition/m/user/f/query",this.consoleForm).then((function(e){t.$message({message:"查询成功",type:"success"}),t.pageOption.currentPage=1,t.totalData=e.data.data}))},addHandler:function(){this.dialogOption={visible:!0,title:"添加用户",type:"add"},this.dialogData={department:{id:""},workId:"",realName:"",password:"",idCard:"",phone:"",email:""}},deleteHandler:function(t){var e=this;this.$axios.post("/busposition/m/user/del",{userId:t.id}).then((function(a){e.totalData.find((function(a,n,l){if(a.id==t.id)return l.splice(n,1),!e.pageData.length&&l.length&&e.pageOption.currentPage--,!0})),e.$message({type:"success",message:"删除成功"})}))},editHandler:function(t){var e;this.departments.find((function(a){if(a.deptName==t.departmentName)return e=a.deptId,!0})),this.dialogOption={visible:!0,title:"修改用户",type:"edit"},this.dialogData={department:{id:e},workId:t.workId,realName:t.realName,password:"*****",idCard:t.idCard,phone:t.phone,email:t.email,id:t.id}},addUser:function(t){this.totalData.push(t)},editUser:function(t){this.totalData.find((function(e,a,n){if(console.log(e.id,t.id),e.id==t.id)return n.splice(a,1,t),!0}))}}}),o=i,r=(a("f183"),a("6691")),s=Object(r["a"])(o,n,l,!1,null,"762137c8",null);e["default"]=s.exports},c97f:function(t,e,a){},f183:function(t,e,a){"use strict";var n=a("c97f"),l=a.n(n);l.a}}]);
//# sourceMappingURL=chunk-7b919e7a.c89014bc.js.map