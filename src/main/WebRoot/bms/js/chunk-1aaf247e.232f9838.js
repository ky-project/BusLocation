(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1aaf247e"],{"24f6":function(t,e,a){},5759:function(t,e,a){},"6b51":function(t,e,a){"use strict";var s=a("5759"),r=a.n(s);r.a},"8dfe":function(t,e,a){"use strict";var s=a("24f6"),r=a.n(s);r.a},"93ee":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"bus"}},[a("el-row",{staticClass:"console"},[a("el-col",{attrs:{span:20}},[a("el-form",{staticClass:"console-form",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"车类型"}},[a("el-select",{attrs:{placeholder:"请选择车类型"},model:{value:t.consoleForm.sbbBusType,callback:function(e){t.$set(t.consoleForm,"sbbBusType",e)},expression:"consoleForm.sbbBusType"}},t._l(t.busTypes,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"司机"}},[a("el-input",{attrs:{placeholder:"请输入司机名称"},model:{value:t.consoleForm.sbbDriverName,callback:function(e){t.$set(t.consoleForm,"sbbDriverName",e)},expression:"consoleForm.sbbDriverName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.searchHandler}},[t._v("查询")])],1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:t.addHandler}},[t._v("添加")])],1)],1),a("el-row",{staticClass:"table-wrap"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.pageData,border:"",stripe:"",size:"small","empty-text":"——暂无数据——","header-cell-style":t.headerCellStyle,"cell-style":t.cellStyle}},[a("el-table-column",{attrs:{prop:"sbbBusType",label:"车类型","min-width":"80"}}),a("el-table-column",{attrs:{prop:"sbbPlateNumber",label:"车牌","min-width":"80"}}),a("el-table-column",{attrs:{prop:"sbbSeatNum",label:"座位数","min-width":"80"}}),a("el-table-column",{attrs:{prop:"sbbDriverName",label:"司机","min-width":"80"}}),a("el-table-column",{attrs:{prop:"sbbDriverTel",label:"电话","min-width":"100"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注","min-width":"150"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"editBtn",attrs:{type:"text",size:"small"},on:{click:function(a){return t.editHandler(e.row)}}},[a("i",{staticClass:"el-icon-edit"})]),a("el-button",{staticClass:"delBtn",attrs:{type:"text",size:"small"},on:{click:function(a){return t.deleteHandler(e.row)}}},[a("i",{staticClass:"el-icon-delete"})])]}}])})],1)],1),a("el-row",{staticClass:"pagination-wrap"},[a("el-pagination",{attrs:{"current-page":t.pageOption.currentPage,"page-sizes":t.pageOption.pageSizes,"page-size":t.pageOption.pageSize,layout:t.pageOption.layout,total:t.pageOption.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("BusDialog",{attrs:{formData:t.formData,formOption:t.formOption,formBusTypes:t.formBusTypes},on:{addBus:t.addBus,editBus:t.editBus}})],1)},r=[],i=(a("608b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"bus_dialog"}},[a("el-dialog",{attrs:{title:t.formOption.title,visible:t.formOption.visible,width:"30%"},on:{"update:visible":function(e){return t.$set(t.formOption,"visible",e)}}},[a("el-form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,size:"mini"}},[a("el-form-item",{attrs:{label:"车类型","label-width":"80px",prop:"sbbBusType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择车类型"},model:{value:t.formData.sbbBusType,callback:function(e){t.$set(t.formData,"sbbBusType",e)},expression:"formData.sbbBusType"}},t._l(t.formBusTypes,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"车牌","label-width":"80px",prop:"sbbPlateNumber"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.sbbPlateNumber,callback:function(e){t.$set(t.formData,"sbbPlateNumber","string"===typeof e?e.trim():e)},expression:"formData.sbbPlateNumber"}})],1),a("el-form-item",{attrs:{label:"座位数","label-width":"80px",prop:"sbbSeatNum"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.sbbSeatNum,callback:function(e){t.$set(t.formData,"sbbSeatNum","string"===typeof e?e.trim():e)},expression:"formData.sbbSeatNum"}})],1),a("el-form-item",{attrs:{label:"司机","label-width":"80px",prop:"sbbDriverName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.sbbDriverName,callback:function(e){t.$set(t.formData,"sbbDriverName","string"===typeof e?e.trim():e)},expression:"formData.sbbDriverName"}})],1),a("el-form-item",{attrs:{label:"电话","label-width":"80px",prop:"sbbDriverTel"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.sbbDriverTel,callback:function(e){t.$set(t.formData,"sbbDriverTel","string"===typeof e?e.trim():e)},expression:"formData.sbbDriverTel"}})],1),a("el-form-item",{staticClass:"desc",attrs:{label:"备注","label-width":"80px",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",row:"3"},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.formOption.visible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.submit("formData")}}},[t._v(t._s("add"===t.formOption.type?"添加":"修改"))])],1)],1)],1)}),o=[],l={props:{formOption:Object,formData:Object,formBusTypes:Array},watch:{"formOption.visible":function(t){t||this.$refs.formData.resetFields()}},data:function(){var t=/^1(3|4|5|6|7|8|9)\d{9}$/,e=function(e,a,s){""===a?s(new Error("请输入电话号码")):t.test(a)?s():s(new Error("电话号码格式错误"))},a=/^\d+$/,s=function(t,e,s){""===e?s(new Error("请输入座位数")):a.test(e)?s():s(new Error("请输入正整数"))};return{rules:{sbbBusType:[{required:!0,message:"请选择校车类型",trigger:"blur"}],sbbPlateNumber:[{required:!0,message:"请输入工号",trigger:"blur"}],sbbSeatNum:[{required:!0,validator:s,trigger:"blur"}],sbbDriverName:[{required:!0,message:"请输入姓名",trigger:"blur"}],sbbDriverTel:[{required:!0,validator:e,trigger:"blur"}]}}},methods:{submit:function(t){var e=this;this.$refs[t].validate((function(t){if(t)switch(e.formOption.type){case"add":e.addData();break;case"edit":e.editData();break}}))},addData:function(){var t=this;this.$axios.post("busposition/m/bus/add",this.formData).then((function(e){t.$message({type:"success",message:"校车添加成功"}),t.$emit("addBus",e.data.data),t.formOption.visible=!1}))},editData:function(){var t=this;this.$axios.post("busposition/m/bus/update",this.formData).then((function(e){t.$message({type:"success",message:"校车修改成功"}),t.$emit("editBus",e.data.data),t.formOption.visible=!1}))}}},n=l,u=(a("8dfe"),a("6691")),b=Object(u["a"])(n,i,o,!1,null,null,null),p=b.exports,m={data:function(){return{headerCellStyle:{"background-color":"#FAFAFA","font-size":"14px","line-height":"32px","text-align":"center"},cellStyle:{"text-align":"center"},consoleForm:{sbbBusType:"",sbbDriverName:""},busTypes:[],totalData:[],pageOption:{currentPage:1,pageSizes:[5,10,20,50],pageSize:5,layout:"total, sizes, prev, pager, next, jumper",total:0},formData:{sbbSeatNum:"",sbbDriverName:"",sbbPlateNumber:"",sbbBusType:"",sbbDriverTel:"",remark:"",id:""},formOption:{type:"",visible:!1,title:""},formBusTypes:[]}},components:{BusDialog:p},computed:{pageData:function(){var t=this,e=(this.pageOption.currentPage-1)*this.pageOption.pageSize;return this.totalData.filter((function(a,s){return s>=e&&s<e+t.pageOption.pageSize}))}},watch:{totalData:function(t){this.pageOption.total=t.length}},created:function(){this.getBusTypes(),this.getAllBusData()},methods:{getBusTypes:function(){var t=this;this.$axios.get("busposition/m/bus/type").then((function(e){t.formBusTypes=JSON.parse(JSON.stringify(e.data.data)),t.busTypes=e.data.data,t.busTypes.unshift("全部")}))},getAllBusData:function(){var t=this;this.$axios.get("busposition/m/bus/list").then((function(e){t.totalData=e.data.data}))},searchHandler:function(){var t=this,e=JSON.parse(JSON.stringify(this.consoleForm));"全部"===e.sbbBusType&&(e.sbbBusType=""),this.$axios.post("busposition/m/bus/f/nameAndType",e).then((function(e){t.$message({message:"查询成功",type:"success"}),t.pageOption.currentPage=1,t.totalData=e.data.data}))},addHandler:function(){this.formOption={title:"校车添加",type:"add",visible:!0},this.formData={sbbSeatNum:"",sbbDriverName:"",sbbPlateNumber:"",sbbBusType:"",sbbDriverTel:"",remark:""}},editHandler:function(t){this.formOption={title:"修改校车",type:"edit",visible:!0},this.formData=JSON.parse(JSON.stringify(t))},deleteHandler:function(t){var e=this;this.$axios.post("busposition/m/bus/del",{id:t.id}).then((function(a){e.totalData.find((function(a,s,r){a.id==t.id&&(r.splice(s,1),!e.pageData.length&&r.length&&e.pageOption.currentPage--)})),e.$message({type:"success",message:"删除成功"})}))},addBus:function(t){this.totalData.push(t)},editBus:function(t){this.totalData.find((function(e,a,s){if(e.id==t.id)return s.splice(a,1,t),!0}))},handleSizeChange:function(t){this.pageOption.pageSize=t},handleCurrentChange:function(t){this.pageOption.currentPage=t}}},c=m,f=(a("6b51"),Object(u["a"])(c,s,r,!1,null,"f163ae8a",null));e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-1aaf247e.232f9838.js.map